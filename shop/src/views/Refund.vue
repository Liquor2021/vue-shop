<template>
  <div class="refund">
    <back :title="name"></back>
    <div v-if="!refund">
      <svg
        width="148"
        height="148"
        viewBox="0 0 1024 1024"
        style="width: 148px; height: 148px"
      >
        <path
          d="M200.648649 179.891892h397.837837c4.151351 0 7.610811 1.383784 10.378379 4.151351L674.594595 256c2.075676 2.767568 3.459459 6.227027 3.459459 9.686486V809.513514c0 7.610811-6.227027 13.837838-13.837838 13.837837H200.648649c-7.610811 0-13.837838-6.227027-13.837838-13.837837V193.72973c0-7.610811 6.227027-13.837838 13.837838-13.837838z"
          fill="#FBFBFB"
        ></path>
        <path
          d="M598.486486 190.27027c1.383784 0 2.075676 0.691892 2.767568 0.691892l65.037838 71.264865c0.691892 1.383784 1.383784 2.075676 1.383784 3.459459V809.513514c0 2.075676-1.383784 3.459459-3.45946 3.459459H200.648649c-2.075676 0-3.459459-1.383784-3.45946-3.459459V193.72973c0-2.075676 1.383784-3.459459 3.45946-3.45946h397.837837m0-10.378378H200.648649c-7.610811 0-13.837838 6.227027-13.837838 13.837838v615.783784c0 7.610811 6.227027 13.837838 13.837838 13.837837h463.567567c7.610811 0 13.837838-6.227027 13.837838-13.837837V265.686486c0-3.459459-1.383784-6.918919-3.459459-9.686486L608.864865 184.043243c-2.767568-2.767568-6.227027-4.151351-10.378379-4.151351z"
          fill="#AAAAAA"
        ></path>
        <path
          d="M316.886486 358.4h238.702703v10.378378H316.886486zM316.886486 476.021622h238.702703v10.378378H316.886486zM316.886486 593.643243h238.702703v10.378379H316.886486z"
          fill="#E5E5E5"
        ></path>
        <path
          d="M736.172973 691.891892l38.745946 103.783784H615.783784l38.054054-103.783784c-17.297297-12.454054-27.675676-32.518919-27.675676-55.351351 0-38.054054 31.135135-69.189189 69.189189-69.18919s69.189189 31.135135 69.18919 69.18919c0 22.832432-11.07027 42.897297-28.367568 55.351351z"
          fill="#FBFBFB"
        ></path>
        <path
          d="M695.351351 577.72973c32.518919 0 58.810811 26.291892 58.810811 58.810811 0 18.681081-8.994595 35.978378-24.216216 47.048648l-6.227027 4.843243 2.767567 7.610811 33.210811 89.945946H630.313514l33.21081-89.945946 2.767568-7.610811-6.227027-4.843243c-14.52973-10.378378-23.524324-27.675676-23.524324-47.048648 0-32.518919 26.291892-58.810811 58.81081-58.810811m0-10.378379c-38.054054 0-69.189189 31.135135-69.189189 69.18919 0 22.832432 10.378378 42.897297 27.675676 55.351351L615.783784 795.675676h159.135135l-38.745946-103.783784c17.297297-12.454054 28.367568-32.518919 28.367568-55.351351 0-38.054054-31.135135-69.189189-69.18919-69.18919z"
          fill="#AAAAAA"
        ></path>
        <path
          d="M588.108108 740.324324h207.567568c22.832432 0 41.513514 18.681081 41.513513 41.513514v34.594594c0 22.832432-18.681081 41.513514-41.513513 41.513514H588.108108c-22.832432 0-41.513514-18.681081-41.513513-41.513514v-34.594594c0-22.832432 18.681081-41.513514 41.513513-41.513514z"
          fill="#FBFBFB"
        ></path>
        <path
          d="M795.675676 750.702703c17.297297 0 31.135135 13.837838 31.135135 31.135135v34.594594c0 17.297297-13.837838 31.135135-31.135135 31.135136H588.108108c-17.297297 0-31.135135-13.837838-31.135135-31.135136v-34.594594c0-17.297297 13.837838-31.135135 31.135135-31.135135h207.567568m0-10.378379H588.108108c-22.832432 0-41.513514 18.681081-41.513513 41.513514v34.594594c0 22.832432 18.681081 41.513514 41.513513 41.513514h207.567568c22.832432 0 41.513514-18.681081 41.513513-41.513514v-34.594594c0-22.832432-18.681081-41.513514-41.513513-41.513514z"
          fill="#AAAAAA"
        ></path>
        <path
          d="M695.351351 633.081081m-31.135135 0a31.135135 31.135135 0 1 0 62.27027 0 31.135135 31.135135 0 1 0-62.27027 0Z"
          fill="#FBFBFB"
        ></path>
        <path
          d="M695.351351 664.216216C678.054054 664.216216 664.216216 650.378378 664.216216 633.081081s13.837838-31.135135 31.135135-31.135135 31.135135 13.837838 31.135135 31.135135-13.837838 31.135135-31.135135 31.135135z m0-51.891892c-11.762162 0-20.756757 9.686486-20.756756 20.756757s9.686486 20.756757 20.756756 20.756757 20.756757-9.686486 20.756757-20.756757-8.994595-20.756757-20.756757-20.756757z"
          fill="#AAAAAA"
        ></path>
        <path
          d="M608.864865 184.043243c-2.767568-2.767568-6.227027-4.151351-9.686487-4.151351v82.335135c0 4.151351 2.767568 6.918919 6.918919 6.918919H678.054054v-3.45946c0-3.459459-1.383784-6.918919-3.459459-9.686486L608.864865 184.043243z"
          fill="#EEEEEE"
        ></path>
        <path
          d="M609.556757 199.956757l53.967567 58.810811h-53.967567v-58.810811M599.178378 179.891892v82.335135c0 4.151351 2.767568 6.918919 6.918919 6.918919H678.054054v-3.45946c0-3.459459-1.383784-6.918919-3.459459-9.686486L608.864865 184.043243c-2.767568-2.767568-6.227027-4.151351-9.686487-4.151351z"
          fill="#AAAAAA"
        ></path>
      </svg>
      <p>您还没有待评价订单呢~</p>
    </div>

    <!-- 退款信息 -->
    <div class="pending" v-if="price && price.length > 0">
      <div class="pengding_list" v-for="(t, i) in refund" :key="price[i]">
        <!-- 时间状态栏 -->
        <van-cell title="骆驼商城" value="退款受理中" />
        <!-- 商品数据 -->
        <div v-if="t.length > 0">
          <div v-for="d in t" :key="d.id">
            <van-card
              :num="d.selectedNum"
              :price="d.price"
              :desc="d.msg"
              :thumb="d.pic"
              class="sub_card"
              v-if="d.pic"
            />
          </div>
          <div v-for="d in t" :key="d.image">
            <van-card
              :num="d.selectedNum"
              :price="d.price"
              :desc="d.store_name"
              :thumb="d.image"
              class="sub_card"
              v-if="d.image"
            />
          </div>
        </div>
        <!-- 商品卡片加载loading -->
        <van-loading
          type="spinner"
          color="#2c3167"
          class="sub_loading"
          size="40px"
          v-else
          vertical
        >
          加载中..
        </van-loading>
        <!-- 总金额 -->
        <h3>共{{ t.length }}件商品，总金额￥{{ price[i] }}</h3>
        <div class="pe_refund">
          <p>受理中</p>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import back from "../components/Back.vue";
import { mapState } from "vuex";
export default {
  data() {
    return {
      name: "售后 | 退款",
      price: [],
    };
  },
  created() {
    if (!this.refund) return;
    this.refund.forEach((v, i) => {
      // console.log(this.price);
      if (this.price.length < 1) {
        this.price[i] = v[0].price;
      } else {
        this.price.push(v[0].price);
      }
    });
  },
  components: {
    back,
  },
  computed: {
    ...mapState(["refund"]),
  },
};
</script>

<style lang="less" scoped>
.refund {
  background-color: #f6f6f6;
  height: 100vh;
  svg {
    display: block;
    margin: 150px auto;
    margin-bottom: 20px;
  }
  p {
    font-size: 14px;
    text-align: center;
    color: #ffffff;
  }
}
</style>